import{_ as x}from"./_plugin-vue_export-helper-c27b6911.js";import{r as i,o as C,a as n,b as N,c as B,d as V,e as l,w as a,f as p,t as S}from"./index-1eba32cc.js";const T={class:"users"},j={class:"header"},D={__name:"Users",setup(O){const f=i([]),r=i(!1),t=i({username:"",password:"",name:"",role:"user",department:""});C(async()=>{await v()});const v=async()=>{try{const s=await fetch("/api/users");s.ok&&(f.value=await s.json())}catch(s){console.error("加载用户失败:",s)}},b=async()=>{try{(await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.value)})).ok&&(r.value=!1,t.value={username:"",password:"",name:"",role:"user",department:""},await v())}catch(s){console.error("添加用户失败:",s)}};return(s,e)=>{const _=n("el-button"),d=n("el-table-column"),y=n("el-tag"),w=n("el-table"),m=n("el-input"),u=n("el-form-item"),c=n("el-option"),U=n("el-select"),g=n("el-form"),k=n("el-dialog");return N(),B("div",T,[V("div",j,[e[9]||(e[9]=V("h2",null,"用户管理",-1)),l(_,{type:"primary",onClick:e[0]||(e[0]=o=>r.value=!0)},{default:a(()=>[...e[8]||(e[8]=[p("新增用户",-1)])]),_:1})]),l(w,{data:f.value,style:{width:"100%"}},{default:a(()=>[l(d,{prop:"username",label:"用户名"}),l(d,{prop:"name",label:"姓名"}),l(d,{prop:"role",label:"角色"},{default:a(o=>[l(y,{type:o.row.role==="admin"?"danger":"success"},{default:a(()=>[p(S(o.row.role==="admin"?"管理员":"普通用户"),1)]),_:2},1032,["type"])]),_:1}),l(d,{prop:"department",label:"部门"})]),_:1},8,["data"]),l(k,{modelValue:r.value,"onUpdate:modelValue":e[7]||(e[7]=o=>r.value=o),title:"新增用户"},{footer:a(()=>[l(_,{onClick:e[6]||(e[6]=o=>r.value=!1)},{default:a(()=>[...e[10]||(e[10]=[p("取消",-1)])]),_:1}),l(_,{type:"primary",onClick:b},{default:a(()=>[...e[11]||(e[11]=[p("确定",-1)])]),_:1})]),default:a(()=>[l(g,{model:t.value},{default:a(()=>[l(u,{label:"用户名"},{default:a(()=>[l(m,{modelValue:t.value.username,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.username=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"密码"},{default:a(()=>[l(m,{modelValue:t.value.password,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.password=o),type:"password"},null,8,["modelValue"])]),_:1}),l(u,{label:"姓名"},{default:a(()=>[l(m,{modelValue:t.value.name,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.name=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"角色"},{default:a(()=>[l(U,{modelValue:t.value.role,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.role=o)},{default:a(()=>[l(c,{label:"普通用户",value:"user"}),l(c,{label:"管理员",value:"admin"})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"部门"},{default:a(()=>[l(m,{modelValue:t.value.department,"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.department=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},E=x(D,[["__scopeId","data-v-f0e33c7f"]]);export{E as default};
